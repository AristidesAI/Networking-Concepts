<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Interview Master</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --secondary: #64748b;
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text: #1e293b;
            --success: #22c55e;
            --error: #ef4444;
            --border: #e2e8f0;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        h1 { margin: 0; color: var(--primary-dark); font-size: 2.2rem; }
        .subtitle { color: var(--secondary); margin-top: 5px; }

        /* Navigation Tabs */
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 10px 24px;
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: var(--secondary);
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .tab-btn:hover { background: #f1f5f9; }
        .tab-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.3);
        }

        /* Views */
        .view-section { display: none; animation: fadeIn 0.3s ease-in-out; }
        .view-section.active { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* Study List Styles */
        .study-controls {
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .qa-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 4px solid var(--primary);
            cursor: pointer;
            transition: transform 0.2s;
        }

        .qa-card:hover { transform: translateX(5px); }
        .qa-q { font-weight: 700; font-size: 1.1rem; display: flex; justify-content: space-between; }
        .qa-a { margin-top: 15px; padding-top: 15px; border-top: 1px dashed var(--border); display: none; color: #475569; }
        .qa-card.open .qa-a { display: block; }
        .tag { font-size: 0.75rem; background: #e0f2fe; color: #0369a1; padding: 2px 8px; border-radius: 4px; margin-right: 10px; }

        /* Quiz Styles */
        .quiz-container {
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; }

        .question-text { font-size: 1.3rem; font-weight: 700; margin-bottom: 25px; color: var(--text); }
        
        .options-grid { display: grid; gap: 12px; }
        
        .option-btn {
            background: white;
            border: 2px solid var(--border);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            text-align: left;
            position: relative;
        }

        .option-btn:hover:not(.disabled) { border-color: var(--primary); background: #eff6ff; }
        
        .option-btn.correct { background: #dcfce7; border-color: var(--success); color: #14532d; }
        .option-btn.wrong { background: #fee2e2; border-color: var(--error); color: #7f1d1d; opacity: 0.7; }
        .option-btn.disabled { cursor: default; pointer-events: none; }

        .quiz-feedback { margin-top: 20px; font-weight: bold; min-height: 24px; }
        .btn-next {
            margin-top: 20px;
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            display: none;
        }

        /* Leaderboard */
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        }
        .leaderboard-table th, .leaderboard-table td { padding: 15px; text-align: left; border-bottom: 1px solid var(--border); }
        .leaderboard-table th { background: #f8fafc; font-weight: 600; }
        .rank-1 { color: #ca8a04; font-weight: bold; } /* Gold */
        .rank-2 { color: #94a3b8; font-weight: bold; } /* Silver */
        .rank-3 { color: #b45309; font-weight: bold; } /* Bronze */

        /* Results Screen */
        .results-screen { text-align: center; display: none; }
        .score-circle {
            width: 120px; height: 120px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0 auto 20px;
        }
        .input-group { margin: 20px 0; }
        input[type="text"] { padding: 10px; border: 1px solid var(--border); border-radius: 6px; width: 200px; font-size: 1rem; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Network Interview Master</h1>
        <p class="subtitle">Study. Quiz. Compete.</p>
    </header>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('study')">üìñ Study Mode</button>
        <button class="tab-btn" onclick="switchTab('quiz')">‚ö° Quiz Mode</button>
        <button class="tab-btn" onclick="switchTab('leaderboard')">üèÜ Leaderboard</button>
    </div>

    <div id="study" class="view-section active">
        <div class="study-controls">
            <select id="categoryFilter" style="padding: 8px; border-radius: 6px; border: 1px solid #ccc;">
                <option value="all">All Concepts</option>
                <option value="High Priority">üî• High Priority</option>
                <option value="Ports">üîå Ports & Protocols</option>
                <option value="Networking Basics">üìö Basics</option>
                <option value="Advanced">üöÄ Advanced</option>
            </select>
        </div>
        <div id="studyList">
            </div>
    </div>

    <div id="quiz" class="view-section">
        <div id="quizStart" style="text-align: center;">
            <h2>Test Your Knowledge</h2>
            <p>10 Random Questions. 4 Choices. How high can you score?</p>
            <button class="btn-next" style="display: inline-block;" onclick="startQuiz()">Start Quiz</button>
        </div>

        <div id="quizGame" style="display: none;" class="quiz-container">
            <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
            <div id="qCategory" class="tag" style="display: inline-block; margin-bottom: 10px;">Category</div>
            <div class="question-text" id="qText">Question goes here...</div>
            <div class="options-grid" id="optionsGrid">
                </div>
            <div class="quiz-feedback" id="feedback"></div>
            <button class="btn-next" id="nextBtn" onclick="nextQuestion()">Next Question</button>
        </div>

        <div id="quizResults" class="results-screen">
            <div class="score-circle" id="finalScore">0/10</div>
            <h2>Quiz Complete!</h2>
            <p>Enter your name to save your score to the local leaderboard.</p>
            <div class="input-group">
                <input type="text" id="playerName" placeholder="Your Name" maxlength="15">
                <button class="tab-btn" style="background: var(--success); color: white; border: none;" onclick="saveScore()">Save Score</button>
            </div>
            <button class="tab-btn" onclick="startQuiz()">Try Again</button>
        </div>
    </div>

    <div id="leaderboard" class="view-section">
        <h2 style="text-align: center;">Local Hall of Fame</h2>
        <table class="leaderboard-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Name</th>
                    <th>Score</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody id="leaderboardBody">
                </tbody>
        </table>
        <p style="text-align: center; color: #94a3b8; font-size: 0.9rem; margin-top: 20px;">
            *Scores are stored in your browser's local storage.
        </p>
    </div>

</div>

<script>
    // --- DATA ---
    // Added 'distractors' for better quiz generation, or we can randomize from other answers.
    // For specific numeric answers (like ports), I hardcoded distractors in logic or data.
    const db = [
        // HIGH PRIORITY
        { 
            cat: "High Priority", 
            q: "What is 127.0.0.1?", 
            a: "Loopback Address (Localhost). Used to test the network card.", 
            opts: ["Loopback Address", "Default Gateway", "Broadcast Address", "APIPA Address"]
        },
        { 
            cat: "High Priority", 
            q: "What is 169.254.x.x?", 
            a: "APIPA (Automatic Private IP). Assigned when DHCP fails.", 
            opts: ["APIPA (DHCP Fail)", "Public IP", "Class A Private IP", "Multicast Address"]
        },
        { 
            cat: "High Priority", 
            q: "What is the broadcast address for 192.168.1.0/24?", 
            a: "192.168.1.255. It targets all devices on that subnet.", 
            opts: ["192.168.1.255", "192.168.1.1", "192.168.1.0", "255.255.255.0"]
        },
        { 
            cat: "High Priority", 
            q: "Layer 2 vs Layer 3 separation?", 
            a: "VLANs separate at Layer 2 (Switch). Subnets separate at Layer 3 (IP/Router).", 
            opts: ["VLAN = L2, Subnet = L3", "VLAN = L3, Subnet = L2", "Both are L2", "Both are L3"]
        },

        // PORTS & PROTOCOLS
        { cat: "Ports", q: "Port 22 is used for?", a: "SSH (Secure Shell) - Secure remote login.", opts: ["SSH", "Telnet", "FTP", "HTTP"] },
        { cat: "Ports", q: "Port 23 is used for?", a: "Telnet - Unencrypted remote login.", opts: ["Telnet", "SSH", "SMTP", "DNS"] },
        { cat: "Ports", q: "Port 53 is used for?", a: "DNS (Domain Name System).", opts: ["DNS", "DHCP", "HTTP", "SNMP"] },
        { cat: "Ports", q: "Port 80 is used for?", a: "HTTP - Unsecured Web Traffic.", opts: ["HTTP", "HTTPS", "FTP", "POP3"] },
        { cat: "Ports", q: "Port 443 is used for?", a: "HTTPS - Secured Web Traffic.", opts: ["HTTPS", "HTTP", "RDP", "IMAP"] },
        { cat: "Ports", q: "Port 3389 is used for?", a: "RDP (Remote Desktop Protocol).", opts: ["RDP", "SSH", "LDAP", "SQL"] },
        { cat: "Ports", q: "Port 21 is used for?", a: "FTP (File Transfer Protocol) Control.", opts: ["FTP", "SSH", "TFTP", "SMPT"] },

        // BASICS
        { 
            cat: "Networking Basics", 
            q: "What is a '3-Way Handshake'?", 
            a: "SYN, SYN-ACK, ACK. The process TCP uses to establish a connection.", 
            opts: ["SYN, SYN-ACK, ACK", "SYN, ACK, FIN", "Connect, Accept, Send", "Hello, Hi, Ack"]
        },
        { 
            cat: "Networking Basics", 
            q: "Which protocol is Connectionless (Fire and Forget)?", 
            a: "UDP (User Datagram Protocol).", 
            opts: ["UDP", "TCP", "HTTP", "FTP"]
        },
        { 
            cat: "Networking Basics", 
            q: "Which DNS record points a Hostname to an IPv4 address?", 
            a: "A Record.", 
            opts: ["A Record", "AAAA Record", "CNAME", "MX Record"]
        },
        { 
            cat: "Networking Basics", 
            q: "Which DNS record handles Email traffic?", 
            a: "MX (Mail Exchange) Record.", 
            opts: ["MX Record", "A Record", "TXT Record", "PTR Record"]
        },
        { 
            cat: "Networking Basics", 
            q: "Difference between Hub and Switch?", 
            a: "Hub broadcasts to all ports (dumb). Switch sends only to destination MAC (smart).", 
            opts: ["Hub=Broadcast, Switch=Unicast", "Hub=Unicast, Switch=Broadcast", "Hub is L3, Switch is L2", "No difference"]
        },

        // ADVANCED / OTHER
        { 
            cat: "Advanced", 
            q: "What is the command to view IP config in Linux?", 
            a: "ifconfig (or 'ip addr').", 
            opts: ["ifconfig", "ipconfig", "netsh", "ls -ip"]
        },
        { 
            cat: "Advanced", 
            q: "What is a /30 subnet typically used for?", 
            a: "Point-to-Point links (only 2 usable hosts).", 
            opts: ["Point-to-Point links", "Large Offices", "Home WiFi", "The Internet"]
        },
        { 
            cat: "Advanced", 
            q: "How does a Router determine the path?", 
            a: "Routing Table (Longest Prefix Match).", 
            opts: ["Routing Table", "MAC Table", "ARP Cache", "DNS Query"]
        },
        { 
            cat: "Advanced", 
            q: "What allows private IPs to access the internet?", 
            a: "NAT (Network Address Translation).", 
            opts: ["NAT", "DHCP", "DNS", "BGP"]
        },
        {
            cat: "Advanced",
            q: "Which WiFi standard operates on 2.4GHz and 5GHz?",
            a: "802.11n (WiFi 4) or 802.11ax (WiFi 6).",
            opts: ["802.11n", "802.11b", "802.11a", "Bluetooth"]
        },
        {
            cat: "Advanced",
            q: "What is a 'Trunk' port?",
            a: "A port that carries traffic for multiple VLANs using tagging (802.1q).",
            opts: ["Carries multiple VLANs", "Connects to ISP", "Only for Voice traffic", "Power over Ethernet"]
        }
    ];

    // --- APP LOGIC ---

    // 1. Initialization
    document.addEventListener('DOMContentLoaded', () => {
        renderStudyList('all');
        loadLeaderboard();

        // Filter Listener
        document.getElementById('categoryFilter').addEventListener('change', (e) => {
            renderStudyList(e.target.value);
        });
    });

    function switchTab(tabId) {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        
        document.getElementById(tabId).classList.add('active');
        // Find button that calls this function (rough way)
        const btns = document.querySelectorAll('.tab-btn');
        if(tabId === 'study') btns[0].classList.add('active');
        if(tabId === 'quiz') btns[1].classList.add('active');
        if(tabId === 'leaderboard') btns[2].classList.add('active');
    }

    // 2. Study Mode Logic
    function renderStudyList(filter) {
        const list = document.getElementById('studyList');
        list.innerHTML = '';
        
        const filtered = filter === 'all' ? db : db.filter(item => item.cat === filter || (filter === 'High Priority' && item.cat === 'High Priority')); // Simple filter

        if(filtered.length === 0) {
            list.innerHTML = '<p style="text-align:center; color:#888;">No questions in this category.</p>'; 
            return; 
        }

        filtered.forEach(item => {
            const card = document.createElement('div');
            card.className = 'qa-card';
            card.onclick = () => card.classList.toggle('open');
            card.innerHTML = `
                <div class="qa-q">
                    <span><span class="tag">${item.cat}</span> ${item.q}</span>
                    <span style="color:var(--primary)">+</span>
                </div>
                <div class="qa-a">${item.a}</div>
            `;
            list.appendChild(card);
        });
    }

    // 3. Quiz Mode Logic
    let currentQuiz = [];
    let qIndex = 0;
    let score = 0;
    let canClick = true;

    function startQuiz() {
        // Reset state
        qIndex = 0;
        score = 0;
        document.getElementById('quizStart').style.display = 'none';
        document.getElementById('quizResults').style.display = 'none';
        document.getElementById('quizGame').style.display = 'block';

        // Shuffle DB and take top 10
        const shuffled = [...db].sort(() => 0.5 - Math.random());
        currentQuiz = shuffled.slice(0, 10); // Take 10 questions

        loadQuestion();
    }

    function loadQuestion() {
        canClick = true;
        const q = currentQuiz[qIndex];
        
        // UI Updates
        document.getElementById('qCategory').textContent = q.cat;
        document.getElementById('qText').textContent = q.q;
        document.getElementById('feedback').textContent = '';
        document.getElementById('nextBtn').style.display = 'none';
        
        // Progress Bar
        const pct = ((qIndex) / 10) * 100;
        document.getElementById('progressFill').style.width = `${pct}%`;

        // Generate Options
        const grid = document.getElementById('optionsGrid');
        grid.innerHTML = '';

        // Randomize options (Correct answer is always index 0 of q.opts in our data structure logic below)
        // Wait, in my data structure `opts` has the correct answer? 
        // Let's ensure the Data structure is consistent.
        // I put the correct answer as the first item in `opts` in the DB manually? 
        // Yes, looking at the DB above, index 0 is always the correct one.
        // We need to shuffle them for display but keep track of the correct one.
        
        let answers = q.opts.map(opt => ({ text: opt, isCorrect: opt === q.opts[0] }));
        
        // Shuffle answers
        answers.sort(() => 0.5 - Math.random());

        answers.forEach(ans => {
            const btn = document.createElement('div');
            btn.className = 'option-btn';
            btn.textContent = ans.text;
            btn.onclick = () => checkAnswer(btn, ans.isCorrect);
            grid.appendChild(btn);
        });
    }

    function checkAnswer(btn, isCorrect) {
        if(!canClick) return;
        canClick = false;

        const allBtns = document.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.classList.add('disabled'));

        if(isCorrect) {
            btn.classList.add('correct');
            document.getElementById('feedback').textContent = "Correct! " + currentQuiz[qIndex].a; // Show explanation
            document.getElementById('feedback').style.color = "var(--success)";
            score++;
        } else {
            btn.classList.add('wrong');
            // Highlight correct one
            // We need to find the button with the text equal to db[index].opts[0]
            // But we shuffled. We can pass isCorrect flag.
            allBtns.forEach(b => {
                 if (b.textContent === currentQuiz[qIndex].opts[0]) b.classList.add('correct');
            });
            document.getElementById('feedback').textContent = "Wrong! Answer: " + currentQuiz[qIndex].a;
            document.getElementById('feedback').style.color = "var(--error)";
        }

        document.getElementById('nextBtn').style.display = 'inline-block';
    }

    function nextQuestion() {
        qIndex++;
        if(qIndex < currentQuiz.length) {
            loadQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        document.getElementById('quizGame').style.display = 'none';
        document.getElementById('quizResults').style.display = 'block';
        document.getElementById('finalScore').textContent = `${score}/10`;
    }

    // 4. Leaderboard Logic (Local Storage)
    function saveScore() {
        const name = document.getElementById('playerName').value.trim() || "Anonymous";
        const date = new Date().toLocaleDateString();
        
        const newEntry = { name, score, date };
        
        // Get existing
        let lb = JSON.parse(localStorage.getItem('net_leaderboard')) || [];
        lb.push(newEntry);
        
        // Sort by score (desc)
        lb.sort((a,b) => b.score - a.score);
        
        // Save
        localStorage.setItem('net_leaderboard', JSON.stringify(lb));
        
        // Switch view
        switchTab('leaderboard');
        loadLeaderboard();
    }

    function loadLeaderboard() {
        const tbody = document.getElementById('leaderboardBody');
        tbody.innerHTML = '';
        
        const lb = JSON.parse(localStorage.getItem('net_leaderboard')) || [];
        
        if(lb.length === 0) {
            tbody.innerHTML = '<tr><td colspan="4" style="text-align:center">No scores yet. Be the first!</td></tr>';
            return;
        }

        lb.forEach((entry, index) => {
            const tr = document.createElement('tr');
            let rankClass = '';
            if(index === 0) rankClass = 'rank-1';
            if(index === 1) rankClass = 'rank-2';
            if(index === 2) rankClass = 'rank-3';

            tr.innerHTML = `
                <td class="${rankClass}">#${index + 1}</td>
                <td style="font-weight:600">${entry.name}</td>
                <td>${entry.score}/10</td>
                <td style="color:#64748b; font-size:0.9em">${entry.date}</td>
            `;
            tbody.appendChild(tr);
        });
    }

</script>

</body>
</html>
