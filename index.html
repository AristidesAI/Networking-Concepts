<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network & Cloud Master (Locked)</title>
    <style>
        :root {
            --primary: #4f46e5; /* Indigo */
            --primary-dark: #3730a3;
            --secondary: #64748b;
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text: #1e293b;
            --success: #22c55e;
            --error: #ef4444;
            --border: #cbd5e1;
            
            /* Tag Colors */
            --vmware: #f97316; /* Orange */
            --cloud: #0ea5e9;  /* Sky Blue (Technical Migration) */
            --strat: #8b5cf6;  /* Violet (Cloud Frameworks/Strategy) */
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            min-height: 100vh;
        }

        /* --- LOGIN SCREEN STYLES --- */
        #loginScreen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
        }

        .login-box {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
            text-align: center;
            width: 300px;
        }

        .login-box h2 { color: var(--text); margin-top: 0; }
        
        .login-input {
            width: 100%;
            padding: 12px;
            margin: 15px 0;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 16px;
        }

        .login-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px;
            width: 100%;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            font-weight: 600;
        }
        .login-btn:hover { background: var(--primary-dark); }
        .error-msg { color: var(--error); font-size: 0.9rem; margin-top: 10px; display: none; }

        /* --- MAIN APP CONTAINER --- */
        #appContent {
            display: none;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        h1 { margin: 0; color: var(--primary-dark); font-size: 2.2rem; }
        .subtitle { color: var(--secondary); margin-top: 5px; }

        /* Navigation Tabs */
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 10px 24px;
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: var(--secondary);
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .tab-btn:hover { background: #f1f5f9; transform: translateY(-1px); }
        .tab-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.3);
        }

        /* Views */
        .view-section { display: none; animation: fadeIn 0.3s ease-in-out; }
        .view-section.active { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* Study List Styles */
        .study-controls {
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .qa-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 5px solid var(--primary);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        /* Category Border Colors */
        .qa-card[data-cat="Virtualization & VMware"] { border-left-color: var(--vmware); }
        .qa-card[data-cat="Cloud Migration"] { border-left-color: var(--cloud); }
        .qa-card[data-cat="Cloud Frameworks"] { border-left-color: var(--strat); }

        .qa-card:hover { transform: translateX(5px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .qa-q { font-weight: 700; font-size: 1.1rem; display: flex; justify-content: space-between; align-items: center; }
        .qa-a { margin-top: 15px; padding-top: 15px; border-top: 1px dashed var(--border); display: none; color: #334155; }
        .qa-card.open .qa-a { display: block; }
        
        .tag { 
            font-size: 0.75rem; 
            background: #e0e7ff; 
            color: var(--primary); 
            padding: 3px 8px; 
            border-radius: 4px; 
            margin-right: 10px; 
            text-transform: uppercase;
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        .tag.vmware { background: #ffedd5; color: #c2410c; } /* Orange */
        .tag.cloud { background: #e0f2fe; color: #0284c7; } /* Blue */
        .tag.strat { background: #ede9fe; color: #6d28d9; } /* Violet */

        /* Quiz Styles */
        .quiz-container {
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; }

        .question-text { font-size: 1.3rem; font-weight: 700; margin-bottom: 25px; color: var(--text); }
        
        .options-grid { display: grid; gap: 12px; }
        
        .option-btn {
            background: white;
            border: 2px solid var(--border);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            text-align: left;
            position: relative;
        }

        .option-btn:hover:not(.disabled) { border-color: var(--primary); background: #f8fafc; }
        
        .option-btn.correct { background: #dcfce7; border-color: var(--success); color: #14532d; }
        .option-btn.wrong { background: #fee2e2; border-color: var(--error); color: #7f1d1d; opacity: 0.7; }
        .option-btn.disabled { cursor: default; pointer-events: none; }

        .quiz-feedback { margin-top: 20px; font-weight: bold; min-height: 24px; }
        .btn-next {
            margin-top: 20px;
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            display: none;
        }

        /* Leaderboard */
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        }
        .leaderboard-table th, .leaderboard-table td { padding: 15px; text-align: left; border-bottom: 1px solid var(--border); }
        .leaderboard-table th { background: #f8fafc; font-weight: 600; }
        .rank-1 { color: #ca8a04; font-weight: bold; }
        .rank-2 { color: #94a3b8; font-weight: bold; }
        .rank-3 { color: #b45309; font-weight: bold; }

        /* Results Screen */
        .results-screen { text-align: center; display: none; }
        .score-circle {
            width: 120px; height: 120px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0 auto 20px;
        }
        .input-group { margin: 20px 0; }
        input[type="text"] { padding: 10px; border: 1px solid var(--border); border-radius: 6px; width: 200px; font-size: 1rem; }

    </style>
</head>
<body>

<div id="loginScreen">
    <div class="login-box">
        <h2>Study Access</h2>
        <p style="color:#64748b; font-size:0.9rem;">Enter password to unlock</p>
        <input type="password" id="passwordInput" class="login-input" placeholder="Password">
        <button onclick="checkPassword()" class="login-btn">Unlock</button>
        <p id="loginError" class="error-msg">Incorrect Password</p>
    </div>
</div>

<div id="appContent">
    <div class="container">
        <header>
            <h1>Network & Cloud Master</h1>
            <p class="subtitle">Frameworks ‚Ä¢ Strategies ‚Ä¢ Migration ‚Ä¢ Networking</p>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('study')">üìñ Study Mode</button>
            <button class="tab-btn" onclick="switchTab('quiz')">‚ö° Quiz Mode</button>
            <button class="tab-btn" onclick="switchTab('leaderboard')">üèÜ Leaderboard</button>
        </div>

        <div id="study" class="view-section active">
            <div class="study-controls">
                <select id="categoryFilter" style="padding: 10px; border-radius: 6px; border: 1px solid #ccc; font-size:1rem;">
                    <option value="all">All Concepts</option>
                    <option value="Cloud Frameworks">üü£ Cloud Frameworks (New)</option>
                    <option value="Cloud Migration">üîµ Cloud Technical</option>
                    <option value="Virtualization & VMware">üü† Virtualization & VMware</option>
                    <option value="High Priority">üî• High Priority</option>
                    <option value="Ports">üîå Ports & Protocols</option>
                    <option value="Networking Basics">üìö Basics</option>
                    <option value="Advanced">üöÄ Advanced Routing</option>
                </select>
            </div>
            <div id="studyList">
                </div>
        </div>

        <div id="quiz" class="view-section">
            <div id="quizStart" style="text-align: center;">
                <h2>Test Your Knowledge</h2>
                <p>15 Random Questions drawn from the full database.</p>
                <button class="btn-next" style="display: inline-block;" onclick="startQuiz()">Start Quiz</button>
            </div>

            <div id="quizGame" style="display: none;" class="quiz-container">
                <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                <div id="qCategory" class="tag" style="display: inline-block; margin-bottom: 10px;">Category</div>
                <div class="question-text" id="qText">Question goes here...</div>
                <div class="options-grid" id="optionsGrid">
                    </div>
                <div class="quiz-feedback" id="feedback"></div>
                <button class="btn-next" id="nextBtn" onclick="nextQuestion()">Next Question</button>
            </div>

            <div id="quizResults" class="results-screen">
                <div class="score-circle" id="finalScore">0/10</div>
                <h2>Quiz Complete!</h2>
                <p>Enter your name to save your score to the local leaderboard.</p>
                <div class="input-group">
                    <input type="text" id="playerName" placeholder="Your Name" maxlength="15">
                    <button class="tab-btn" style="background: var(--success); color: white; border: none;" onclick="saveScore()">Save Score</button>
                </div>
                <button class="tab-btn" onclick="startQuiz()">Try Again</button>
            </div>
        </div>

        <div id="leaderboard" class="view-section">
            <h2 style="text-align: center;">Local Hall of Fame</h2>
            <table class="leaderboard-table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Name</th>
                        <th>Score</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody id="leaderboardBody">
                    </tbody>
            </table>
            <p style="text-align: center; color: #94a3b8; font-size: 0.9rem; margin-top: 20px;">
                *Scores are stored in your browser's local storage.
            </p>
        </div>

    </div>
</div>

<script>
    // --- PASSWORD LOGIC ---
    function checkPassword() {
        const input = document.getElementById('passwordInput').value;
        const error = document.getElementById('loginError');
        
        if(input === "hello") {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('appContent').style.display = 'block';
        } else {
            error.style.display = 'block';
            document.getElementById('passwordInput').value = '';
        }
    }
    document.getElementById("passwordInput").addEventListener("keypress", function(event) {
        if (event.key === "Enter") checkPassword();
    });

    // --- DATA ---
    const db = [
        // --- NEW SECTION: CLOUD FRAMEWORKS & STRATEGY ---
        {
            cat: "Cloud Frameworks",
            q: "What are the 3 Phases of the Cloud Migration Lifecycle?",
            a: "1. <strong>Assess:</strong> Build business case & evaluate readiness.<br>2. <strong>Mobilise:</strong> Build landing zone & fix gaps.<br>3. <strong>Migrate & Modernise:</strong> Move workloads in waves.",
            opts: ["Assess, Mobilise, Migrate", "Plan, Do, Check", "Discover, Design, Deploy", "Copy, Paste, Delete"]
        },
        {
            cat: "Cloud Frameworks",
            q: "What is the 'Rehost' strategy (7 Rs)?",
            a: "<strong>Lift and shift:</strong> Moving applications without changes. Used for fast migration (e.g., data centre lease expiry) or when no code changes are desired.",
            opts: ["Rehost", "Refactor", "Repurchase", "Retire"] // Quiz Q1 context
        },
        {
            cat: "Cloud Frameworks",
            q: "What is the 'Replatform' strategy (7 Rs)?",
            a: "<strong>Lift, tinker, and shift:</strong> Optimising the OS or DB (e.g., SQL to Amazon RDS) without changing core code. Reduces licensing/ops costs.",
            opts: ["Replatform", "Rehost", "Refactor", "Repurchase"] // Quiz Q3 context
        },
        {
            cat: "Cloud Frameworks",
            q: "What is the 'Refactor' strategy (7 Rs)?",
            a: "<strong>Re-architect:</strong> Modifying architecture to use cloud-native features (serverless, containers). High effort, high agility/scalability reward.",
            opts: ["Refactor", "Rehost", "Replatform", "Retain"]
        },
        {
            cat: "Cloud Frameworks",
            q: "What is the 'Repurchase' strategy (7 Rs)?",
            a: "<strong>Drop and shop:</strong> Moving from a traditional license to a SaaS product (e.g., Switching from on-prem CRM to Salesforce).",
            opts: ["Repurchase", "Retire", "Relocate", "Rehost"]
        },
        {
            cat: "Cloud Frameworks",
            q: "What is the 'Retire' strategy (7 Rs)?",
            a: "Decommissioning apps with no business value or usage <5% ('Zombie Apps').",
            opts: ["Retire", "Retain", "Replatform", "Relocate"] // Quiz Q2 context
        },
        {
            cat: "Cloud Frameworks",
            q: "What is 'FinOps'?",
            a: "Financial Operations. The practice where Engineering and Finance collaborate to balance the 'Iron Triangle' of Speed, Cost, and Quality. Engineers take ownership of costs.",
            opts: ["Engineering takes ownership of cost", "Finance controls everything", "Paying the cheapest price only", "Buying servers"] // Quiz Q4 context
        },
        {
            cat: "Cloud Frameworks",
            q: "What is a 'Database Wrapper Service'?",
            a: "A modernization pattern where you create a lightweight service layer to mirror DB functionality. It acts as a gatekeeper to prevent uncontrolled access to a monolith.",
            opts: ["Database Wrapper Service", "Read Replica", "Event Sourcing", "Data Lake"] // Quiz Q5 context
        },
        {
            cat: "Cloud Frameworks",
            q: "What is the 'Strangler Fig Pattern'?",
            a: "Incrementally rewriting and replacing system functionality piece by piece until the legacy system can be decommissioned.",
            opts: ["Incremental replacement of legacy", "Deleting the old system at once", "Blocking all traffic", "Wrapping the database"]
        },
        {
            cat: "Cloud Frameworks",
            q: "In which migration phase do you build the 'Landing Zone'?",
            a: "<strong>Phase 2: Mobilise.</strong> This is where security models, operating models, and foundational networking are established.",
            opts: ["Mobilise", "Assess", "Migrate", "Optimise"] // Quiz Q6 context
        },

        // --- CLOUD MIGRATION (TECHNICAL) ---
        { cat: "Cloud Migration", q: "What is the '7 Rs' assignment phase?", a: "Phase 1: Assess. Discover inventory and assign strategy (Rehost, etc.).", opts: ["Phase 1: Assess", "Phase 2: Mobilise", "Phase 3: Migrate", "Phase 4: Optimize"] },
        { cat: "Cloud Migration", q: "TCP Port for Replication Data?", a: "TCP Port 1500 (Data) and 443 (Control).", opts: ["TCP 1500", "TCP 443", "TCP 80", "UDP 53"] },
        { cat: "Cloud Migration", q: "What is a 'Cutover'?", a: "Shutdown source, final sync, launch cloud instance.", opts: ["Shutdown Source -> Final Sync -> Launch", "Install Agents", "Create Landing Zone", "Delete backups"] },
        { cat: "Cloud Migration", q: "What is 'Wave Planning'?", a: "Grouping apps by dependency to migrate together.", opts: ["Grouping apps by dependency", "Analyzing TCO", "Installing Agents", "Archiving backups"] },
        
        // --- VIRTUALIZATION & VMWARE ---
        { cat: "Virtualization & VMware", q: "What is a VRF?", a: "Virtual Routing and Forwarding. Multiple routing tables on one router (L3).", opts: ["Virtual Routing Table", "Virtual Switch", "Firewall Rule", "VMware File"] },
        { cat: "Virtualization & VMware", q: "What is a vSwitch?", a: "Software switch on a single ESXi host connecting VMs to physical NICs.", opts: ["Switch on one host", "Physical Cisco switch", "Distributed switch", "Router"] },
        { cat: "Virtualization & VMware", q: "What is a vDS?", a: "Distributed Switch. Spans multiple hosts, managed by vCenter.", opts: ["Switch spanning multiple hosts", "Single host switch", "Physical router", "Storage"] },
        { cat: "Virtualization & VMware", q: "What is a Port Group?", a: "Configuration template (VLANs, policies) applied to virtual ports.", opts: ["Config template (VLANs)", "Physical cables", "Hard Drives", "CPU core"] },
        { cat: "Virtualization & VMware", q: "What is vMotion?", a: "Live migration of a running VM between hosts with zero downtime.", opts: ["Live migration", "Moving storage", "Rebooting VM", "Backing up VM"] },

        // --- HIGH PRIORITY ---
        { cat: "High Priority", q: "What is 127.0.0.1?", a: "Loopback (Localhost).", opts: ["Loopback Address", "Gateway", "Broadcast", "APIPA"] },
        { cat: "High Priority", q: "What is 169.254.x.x?", a: "APIPA (DHCP Fail).", opts: ["APIPA", "Public IP", "Class A", "Multicast"] },
        { cat: "High Priority", q: "Broadcast for 192.168.1.0/24?", a: "192.168.1.255.", opts: ["192.168.1.255", "192.168.1.1", "192.168.1.0", "255.255.255.0"] },

        // --- PORTS ---
        { cat: "Ports", q: "Port 22?", a: "SSH.", opts: ["SSH", "Telnet", "FTP", "HTTP"] },
        { cat: "Ports", q: "Port 53?", a: "DNS.", opts: ["DNS", "DHCP", "HTTP", "SNMP"] },
        { cat: "Ports", q: "Port 443?", a: "HTTPS.", opts: ["HTTPS", "HTTP", "RDP", "IMAP"] },
        { cat: "Ports", q: "Port 3389?", a: "RDP.", opts: ["RDP", "SSH", "LDAP", "SQL"] },

        // --- BASICS ---
        { cat: "Networking Basics", q: "3-Way Handshake?", a: "SYN, SYN-ACK, ACK.", opts: ["SYN, SYN-ACK, ACK", "SYN, ACK, FIN", "Connect, Accept, Send", "Hello, Hi, Ack"] },
        { cat: "Networking Basics", q: "Connectionless Protocol?", a: "UDP.", opts: ["UDP", "TCP", "HTTP", "FTP"] },

        // --- ADVANCED ---
        { cat: "Advanced", q: "/30 subnet use?", a: "Point-to-Point links (2 hosts).", opts: ["Point-to-Point", "Office LAN", "WiFi", "Internet"] },
        { cat: "Advanced", q: "Router path decision?", a: "Routing Table (Longest Prefix Match).", opts: ["Routing Table", "MAC Table", "ARP Cache", "DNS"] },
        { cat: "Advanced", q: "What is a Trunk?", a: "Carries multiple VLANs (tagged).", opts: ["Carries multiple VLANs", "ISP Connection", "Voice Only", "PoE"] }
    ];

    // --- APP LOGIC ---
    document.addEventListener('DOMContentLoaded', () => {
        renderStudyList('all');
        loadLeaderboard();
        
        document.getElementById('categoryFilter').addEventListener('change', (e) => {
            renderStudyList(e.target.value);
        });
    });

    function switchTab(tabId) {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        
        document.getElementById(tabId).classList.add('active');
        const btns = document.querySelectorAll('.tab-btn');
        if(tabId === 'study') btns[0].classList.add('active');
        if(tabId === 'quiz') btns[1].classList.add('active');
        if(tabId === 'leaderboard') btns[2].classList.add('active');
    }

    // STUDY LIST
    function renderStudyList(filter) {
        const list = document.getElementById('studyList');
        list.innerHTML = '';
        
        const filtered = filter === 'all' ? db : db.filter(item => item.cat === filter);

        if(filtered.length === 0) {
            list.innerHTML = '<p style="text-align:center; color:#888;">No questions in this category.</p>'; 
            return; 
        }

        filtered.forEach(item => {
            const card = document.createElement('div');
            card.className = 'qa-card';
            card.setAttribute('data-cat', item.cat);
            card.onclick = () => card.classList.toggle('open');
            
            // Dynamic Tag Coloring
            let tagClass = "tag";
            if(item.cat === "Virtualization & VMware") tagClass = "tag vmware";
            if(item.cat === "Cloud Migration") tagClass = "tag cloud";
            if(item.cat === "Cloud Frameworks") tagClass = "tag strat";

            card.innerHTML = `
                <div class="qa-q">
                    <span><span class="${tagClass}">${item.cat}</span> ${item.q}</span>
                    <span style="color:var(--primary)">+</span>
                </div>
                <div class="qa-a">${item.a}</div>
            `;
            list.appendChild(card);
        });
    }

    // QUIZ LOGIC
    let currentQuiz = [];
    let qIndex = 0;
    let score = 0;
    let canClick = true;
    const QUIZ_LENGTH = 15;

    function startQuiz() {
        qIndex = 0;
        score = 0;
        document.getElementById('quizStart').style.display = 'none';
        document.getElementById('quizResults').style.display = 'none';
        document.getElementById('quizGame').style.display = 'block';

        const shuffled = [...db].sort(() => 0.5 - Math.random());
        currentQuiz = shuffled.slice(0, QUIZ_LENGTH); 

        loadQuestion();
    }

    function loadQuestion() {
        canClick = true;
        const q = currentQuiz[qIndex];
        
        const catEl = document.getElementById('qCategory');
        catEl.textContent = q.cat;
        
        catEl.className = "tag";
        if(q.cat === "Virtualization & VMware") catEl.className = "tag vmware";
        if(q.cat === "Cloud Migration") catEl.className = "tag cloud";
        if(q.cat === "Cloud Frameworks") catEl.className = "tag strat";

        document.getElementById('qText').innerHTML = q.q; // Changed to innerHTML for formatting
        document.getElementById('feedback').textContent = '';
        document.getElementById('nextBtn').style.display = 'none';
        
        const pct = ((qIndex) / QUIZ_LENGTH) * 100;
        document.getElementById('progressFill').style.width = `${pct}%`;

        const grid = document.getElementById('optionsGrid');
        grid.innerHTML = '';

        let answers = q.opts.map(opt => ({ text: opt, isCorrect: opt === q.opts[0] }));
        answers.sort(() => 0.5 - Math.random());

        answers.forEach(ans => {
            const btn = document.createElement('div');
            btn.className = 'option-btn';
            btn.textContent = ans.text;
            btn.onclick = () => checkAnswer(btn, ans.isCorrect);
            grid.appendChild(btn);
        });
    }

    function checkAnswer(btn, isCorrect) {
        if(!canClick) return;
        canClick = false;

        const allBtns = document.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.classList.add('disabled'));

        if(isCorrect) {
            btn.classList.add('correct');
            document.getElementById('feedback').innerHTML = `<span style="color:var(--success)">Correct!</span> ${currentQuiz[qIndex].a}`;
            score++;
        } else {
            btn.classList.add('wrong');
            allBtns.forEach(b => {
                 if (b.textContent === currentQuiz[qIndex].opts[0]) b.classList.add('correct');
            });
            document.getElementById('feedback').innerHTML = `<span style="color:var(--error)">Wrong!</span> ${currentQuiz[qIndex].a}`;
        }

        document.getElementById('nextBtn').style.display = 'inline-block';
    }

    function nextQuestion() {
        qIndex++;
        if(qIndex < currentQuiz.length) {
            loadQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        document.getElementById('quizGame').style.display = 'none';
        document.getElementById('quizResults').style.display = 'block';
        document.getElementById('finalScore').textContent = `${score}/${QUIZ_LENGTH}`;
    }

    // LEADERBOARD LOGIC
    function saveScore() {
        const name = document.getElementById('playerName').value.trim() || "Anonymous";
        const date = new Date().toLocaleDateString();
        
        const newEntry = { name, score, date, max: QUIZ_LENGTH };
        
        let lb = JSON.parse(localStorage.getItem('net_strat_leaderboard')) || [];
        lb.push(newEntry);
        lb.sort((a,b) => b.score - a.score);
        localStorage.setItem('net_strat_leaderboard', JSON.stringify(lb));
        
        switchTab('leaderboard');
        loadLeaderboard();
    }

    function loadLeaderboard() {
        const tbody = document.getElementById('leaderboardBody');
        tbody.innerHTML = '';
        
        const lb = JSON.parse(localStorage.getItem('net_strat_leaderboard')) || [];
        
        if(lb.length === 0) {
            tbody.innerHTML = '<tr><td colspan="4" style="text-align:center">No scores yet. Be the first!</td></tr>';
            return;
        }

        lb.forEach((entry, index) => {
            const tr = document.createElement('tr');
            let rankClass = '';
            if(index === 0) rankClass = 'rank-1';
            if(index === 1) rankClass = 'rank-2';
            if(index === 2) rankClass = 'rank-3';

            const maxScore = entry.max || QUIZ_LENGTH;

            tr.innerHTML = `
                <td class="${rankClass}">#${index + 1}</td>
                <td style="font-weight:600">${entry.name}</td>
                <td>${entry.score}/${maxScore}</td>
                <td style="color:#64748b; font-size:0.9em">${entry.date}</td>
            `;
            tbody.appendChild(tr);
        });
    }

</script>
</body>
</html>
